<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Photo Journal｜踏聲樂章 EchoCycle</title>
  <meta name="description" content="《踏聲樂章 EchoCycle》製作與佈展相片記錄（Photo Journal）。" />
  <meta name="theme-color" content="#000000" />

  <!-- Open Graph -->
  <meta property="og:title" content="Photo Journal｜踏聲樂章 EchoCycle" />
  <meta property="og:description" content="製作與佈展相片記錄，含燈光、聲音與結構裝配過程。" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="preview.jpg" />
  <meta property="og:url" content="./gallery.html" />

  <style>
    :root{
      --bg:#000;
      --ink:#fff;
      --ink-dim:#d9d9d9;
      --cyan:#7ffcff;
      --card:#0d0f12;
      --border:#1e2a2a;
      --accent:#19b4c6;
    }
    html{scroll-behavior:smooth}
    body{
      margin:0; color:var(--ink); background:var(--bg);
      font-family:"Noto Sans TC","Helvetica Neue",Arial,sans-serif; line-height:1.85;
    }

    /* Header / Nav (與首頁一致風格) */
    header{
      position:sticky; top:0; z-index:1000;
      background:rgba(0,0,0,0); backdrop-filter:saturate(140%) blur(6px);
      transition:background .35s ease, box-shadow .35s ease, padding .35s ease;
      padding:26px 0 18px;
    }
    .scrolled header{background:rgba(0,0,0,.55); box-shadow:0 6px 24px rgba(0,0,0,.25); padding:16px 0 12px;}
    .wrap{max-width:1200px; margin:0 auto; padding:0 20px;}
    h1{margin:0; font-size:1.6rem; letter-spacing:.5px}
    nav{display:flex; flex-wrap:wrap; gap:.55rem; margin-top:10px}
    nav a{
      position:relative; display:inline-block; padding:.42rem .9rem;
      color:#aefcff; text-decoration:none; border:1px solid var(--border);
      border-radius:999px; background:#0f1416; opacity:.95;
      transition:transform .18s ease, box-shadow .35s ease, background .3s ease, color .3s ease, border-color .3s ease;
    }
    nav a:hover{transform:translateY(-1px); background:#141a1d; color:#fff; box-shadow:0 6px 16px rgba(0,255,255,.09)}
    nav a:active{transform:scale(.96)}
    nav a.active{background:#0b1c1c; color:#eaffff; border-color:#2aa6a6; box-shadow:inset 0 0 0 1px rgba(42,166,166,.7)}
    nav a.active::after{
      content:""; position:absolute; left:12%; right:12%; bottom:-3px; height:2px;
      background:linear-gradient(90deg,transparent,#7ff,transparent); transform:scaleX(1);
    }

    main{padding:26px 0 60px}
    .intro{
      max-width:1100px; margin:10px auto 20px; padding:18px 20px;
      color:var(--ink-dim); background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.06); border-radius:14px;
    }
    .intro p{margin:.25em 0}
    .intro strong{color:#fff}

    /* Grid */
    .grid{
      --size:260px;
      display:grid; gap:14px;
      grid-template-columns:repeat(auto-fill, minmax(var(--size),1fr));
      max-width:1400px; margin:0 auto; padding:8px 20px;
    }
    figure{
      margin:0; border-radius:14px; overflow:hidden;
      background:var(--card); border:1px solid rgba(255,255,255,.06);
      box-shadow:0 10px 24px rgba(0,0,0,.35);
      transform:translateY(8px); opacity:0;
      transition:transform .6s cubic-bezier(.2,.7,.2,1), opacity .6s ease, box-shadow .35s ease, border-color .35s ease;
    }
    figure.on{transform:none; opacity:1}
    figure:hover{box-shadow:0 16px 36px rgba(0,0,0,.45); border-color:rgba(127,255,255,.12)}
    .tile{
      display:block; width:100%; aspect-ratio:4/3; object-fit:cover;
      filter:contrast(1.02) saturate(1.05) brightness(1.04);
      transition:transform .5s ease, filter .4s ease;
    }
    figure:hover .tile{transform:scale(1.04)}
    figcaption{
      padding:10px 12px; font-size:.92rem; color:#cfd8dc;
      border-top:1px solid rgba(255,255,255,.06); background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(0,0,0,.08));
    }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; display:none; place-items:center; z-index:2000;
      background:rgba(0,0,0,.85);
      animation:fade .25s ease both;
    }
    .lightbox.open{display:grid}
    @keyframes fade{from{opacity:0}to{opacity:1}}
    .lb-img{max-width:min(92vw,1400px); max-height:86vh; border-radius:12px; box-shadow:0 20px 50px rgba(0,0,0,.6)}
    .lb-cap{margin-top:8px; color:#d7e9ea; text-align:center; font-size:.95rem}
    .lb-close, .lb-prev, .lb-next{
      position:absolute; top:18px; width:42px; height:42px; border-radius:50%;
      background:rgba(255,255,255,.12); color:#fff; border:1px solid rgba(255,255,255,.25);
      display:grid; place-items:center; cursor:pointer; user-select:none;
      transition:background .25s ease, transform .12s ease;
    }
    .lb-close{right:18px}
    .lb-prev{left:18px; top:50%; transform:translateY(-50%)}
    .lb-next{right:18px; top:50%; transform:translateY(-50%)}
    .lb-prev:hover, .lb-next:hover, .lb-close:hover{background:rgba(255,255,255,.2)}
    .lb-prev:active, .lb-next:active, .lb-close:active{transform:translateY(-50%) scale(.95)}
    .lb-close:active{transform:scale(.95)}

    footer{text-align:center;color:#9aa; padding:26px 0 40px}
    @media (max-width:640px){
      header{padding:20px 0 14px}
      .intro{margin:6px auto 10px}
      .grid{--size:180px}
    }
  </style>
</head>
<body>
  <header id="top">
    <div class="wrap">
      <h1>踏聲樂章 EchoCycle — Photo Journal</h1>
      <nav>
        <a href="index.html#intro">Introduction</a>
        <a href="index.html#music">Music</a>
        <a href="index.html#sustainability">Sustainability</a>
        <a href="index.html#making">Making-of</a>
        <a href="index.html#team">Team</a>
        <a href="gallery.html" class="active">Photo Journal</a>
      </nav>
    </div>
  </header>

  <main>
    <section class="intro wrap">
      <p><strong>製作影像記錄｜Photo Journal</strong></p>
      <p>依時間順序整理現場佈展、感測整合、燈光與多聲道音訊配置過程。點擊任一縮圖可放大檢視，左右可切換。</p>
      <p>Images are arranged in chronological order. Click to open the lightbox and use arrows to navigate.</p>
    </section>

    <!-- Gallery Grid -->
    <section class="grid" id="grid">
      <!-- 照片項目（依 000-1.jpg ~ 000-25.jpg 自動生成） -->
      <!-- 你可自行更改 captions 陣列中的說明文字 -->
    </section>
  </main>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <button class="lb-close" id="lbClose" aria-label="Close">✕</button>
    <button class="lb-prev"  id="lbPrev"  aria-label="Previous">‹</button>
    <img class="lb-img" id="lbImg" alt="" />
    <button class="lb-next"  id="lbNext"  aria-label="Next">›</button>
    <div class="lb-cap" id="lbCap"></div>
  </div>

  <footer>© 2025 EchoCycle — National Cheng Kung University · Techno-Art Program</footer>

  <script>
    // header 背景漸入
    const onScroll=()=>document.body.classList.toggle('scrolled',window.scrollY>10);
    onScroll(); window.addEventListener('scroll',onScroll);

    // 準備 25 張圖與中英說明（占位文字可自行改）
    const total = 25;
    const captions = Array.from({length: total}, (_,i)=> {
      const n = i+1;
      return `#${n.toString().padStart(2,'0')}｜製作記錄 / Making Note`;
    });

    // 建立圖磚
    const grid = document.getElementById('grid');
    const frag = document.createDocumentFragment();
    for(let i=1;i<=total;i++){
      const fig = document.createElement('figure');
      fig.className = 'reveal';
      const a = document.createElement('a');
      a.href = `gallery/000-${i}.jpg`;
      a.dataset.index = i-1;
      const img = document.createElement('img');
      img.loading = 'lazy';
      img.decoding = 'async';
      img.src = `gallery/000-${i}.jpg`;
      img.alt = `EchoCycle Photo ${i}`;
      img.className = 'tile';
      const cap = document.createElement('figcaption');
      cap.textContent = captions[i-1] || '';
      a.appendChild(img);
      fig.appendChild(a);
      fig.appendChild(cap);
      frag.appendChild(fig);
    }
    grid.appendChild(frag);

    // 淡入動畫
    const io = new IntersectionObserver(es=>{
      es.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('on'); io.unobserve(e.target);} });
    },{threshold:.15});
    document.querySelectorAll('figure').forEach(el=>io.observe(el));

    // Lightbox 邏輯
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbCap = document.getElementById('lbCap');
    let idx = 0;

    function openLB(i){
      idx = i;
      lbImg.src = `gallery/000-${idx+1}.jpg`;
      lbCap.textContent = captions[idx] || '';
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
    }
    function closeLB(){
      lb.classList.remove('open');
      lb.setAttribute('aria-hidden','true');
    }
    function prev(){ idx = (idx-1+total)%total; openLB(idx); }
    function next(){ idx = (idx+1)%total; openLB(idx); }

    grid.addEventListener('click', e=>{
      const a = e.target.closest('a');
      if(!a) return;
      e.preventDefault();
      openLB(parseInt(a.dataset.index,10));
    });
    document.getElementById('lbClose').onclick=closeLB;
    document.getElementById('lbPrev').onclick=prev;
    document.getElementById('lbNext').onclick=next;
    lb.addEventListener('click', e=>{ if(e.target===lb) closeLB(); });
    window.addEventListener('keydown', e=>{
      if(!lb.classList.contains('open')) return;
      if(e.key==='Escape') closeLB();
      if(e.key==='ArrowLeft') prev();
      if(e.key==='ArrowRight') next();
    });
  </script>
</body>
</html>
